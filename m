Return-Path: <linux-acpi-owner@vger.kernel.org>
X-Original-To: lists+linux-acpi@lfdr.de
Delivered-To: lists+linux-acpi@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 15D1442A9F1
	for <lists+linux-acpi@lfdr.de>; Tue, 12 Oct 2021 18:49:41 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S230148AbhJLQvk (ORCPT <rfc822;lists+linux-acpi@lfdr.de>);
        Tue, 12 Oct 2021 12:51:40 -0400
Received: from mail.kernel.org ([198.145.29.99]:34250 "EHLO mail.kernel.org"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S229809AbhJLQvi (ORCPT <rfc822;linux-acpi@vger.kernel.org>);
        Tue, 12 Oct 2021 12:51:38 -0400
Received: by mail.kernel.org (Postfix) with ESMTPSA id E8C4C60295;
        Tue, 12 Oct 2021 16:49:35 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
        s=k20201202; t=1634057376;
        bh=O9N/vbiiJBn7TCPn1VisvVOw900N2UyWCLVy6CFvVmM=;
        h=Subject:From:To:Cc:Date:In-Reply-To:References:From;
        b=rvO9Xe6aD88rfugPWZqcCyZddO/TfuqYgVvjW8AxSrUJg4xsa7VcEmgSQYGGxOvZB
         U8/ACWg1WfsrMrw2tKo21cp6CXPHw0f2cICv1fQkVC50ES0sdDYrKTeoKxntrIAiq2
         eI44XyUmzpSrAony4SeTh5Do1rD2ZI36GnZ5XIvMYdgZZ+6NtfGvcxe7Lo1V0FX0tS
         6aP62l/Y7kInxQ2JxNRRG+EnMLWUxx541NMlqRyWSHXglGPU1/x9al+257xrF5TAmQ
         t1fgJgKb6r2Qdx9Z5nHl7hZx0UnQ9EbKLtlerklhbwhKxIniPMQ/NZAwvvaMFj5E9R
         UD4ykQp2uwkCQ==
Message-ID: <74a18323b3308528c1f5c2359eeaaa441072856f.camel@kernel.org>
Subject: Re: [PATCH v9 5/7] x86/sgx: Hook arch_memory_failure() into
 mainline code
From:   Jarkko Sakkinen <jarkko@kernel.org>
To:     Tony Luck <tony.luck@intel.com>,
        "Rafael J. Wysocki" <rafael.j.wysocki@intel.com>,
        naoya.horiguchi@nec.com
Cc:     Andrew Morton <akpm@linux-foundation.org>,
        Sean Christopherson <seanjc@google.com>,
        Dave Hansen <dave.hansen@intel.com>,
        Cathy Zhang <cathy.zhang@intel.com>, linux-sgx@vger.kernel.org,
        linux-acpi@vger.kernel.org, linux-mm@kvack.org,
        Reinette Chatre <reinette.chatre@intel.com>
Date:   Tue, 12 Oct 2021 19:49:33 +0300
In-Reply-To: <20211011185924.374213-6-tony.luck@intel.com>
References: <20211001164724.220532-1-tony.luck@intel.com>
         <20211011185924.374213-1-tony.luck@intel.com>
         <20211011185924.374213-6-tony.luck@intel.com>
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64
User-Agent: Evolution 3.40.0-1 
MIME-Version: 1.0
Precedence: bulk
List-ID: <linux-acpi.vger.kernel.org>
X-Mailing-List: linux-acpi@vger.kernel.org

T24gTW9uLCAyMDIxLTEwLTExIGF0IDExOjU5IC0wNzAwLCBUb255IEx1Y2sgd3JvdGU6Cj4gQWRk
IGEgY2FsbCBpbnNpZGUgbWVtb3J5X2ZhaWx1cmUoKSB0byBjYWxsIHRoZSBhcmNoIHNwZWNpZmlj
IGNvZGUKPiB0byBjaGVjayBpZiB0aGUgYWRkcmVzcyBpcyBhbiBTR1ggRVBDIHBhZ2UgYW5kIGhh
bmRsZSBpdC4KPiAKPiBOb3RlIHRoZSBTR1ggRVBDIHBhZ2VzIGRvIG5vdCBoYXZlIGEgInN0cnVj
dCBwYWdlIiBlbnRyeSwgc28gdGhlIGhvb2sKPiBnb2VzIGluIGF0IHRoZSBzYW1lIHBvaW50IGFz
IHRoZSBkZXZpY2UgbWFwcGluZyBob29rLgo+IAo+IFB1bGwgdGhlIGNhbGwgdG8gYWNxdWlyZSB0
aGUgbXV0ZXggZWFybGllciBzbyB0aGUgU0dYIGVycm9ycyBhcmUgYWxzbwo+IHByb3RlY3RlZC4K
PiAKPiBNYWtlIHNldF9tY2Vfbm9zcGVjKCkgc2tpcCBTR1ggcGFnZXMgd2hlbiB0cnlpbmcgdG8g
YWRqdXN0Cj4gdGhlIDE6MSBtYXAuCj4gCj4gVGVzdGVkLWJ5OiBSZWluZXR0ZSBDaGF0cmUgPHJl
aW5ldHRlLmNoYXRyZUBpbnRlbC5jb20+Cj4gU2lnbmVkLW9mZi1ieTogVG9ueSBMdWNrIDx0b255
Lmx1Y2tAaW50ZWwuY29tPgo+IC0tLQo+IMKgYXJjaC94ODYvaW5jbHVkZS9hc20vcHJvY2Vzc29y
LmjCoCB8wqAgOCArKysrKysrKwo+IMKgYXJjaC94ODYvaW5jbHVkZS9hc20vc2V0X21lbW9yeS5o
IHzCoCA0ICsrKysKPiDCoGluY2x1ZGUvbGludXgvbW0uaMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoCB8IDE0ICsrKysrKysrKysrKysrCj4gwqBtbS9tZW1vcnktZmFpbHVyZS5jwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoCB8IDE5ICsrKysrKysrKysrKystLS0tLS0KPiDCoDQgZmls
ZXMgY2hhbmdlZCwgMzkgaW5zZXJ0aW9ucygrKSwgNiBkZWxldGlvbnMoLSkKPiAKPiBkaWZmIC0t
Z2l0IGEvYXJjaC94ODYvaW5jbHVkZS9hc20vcHJvY2Vzc29yLmggYi9hcmNoL3g4Ni9pbmNsdWRl
L2FzbS9wcm9jZXNzb3IuaAo+IGluZGV4IDlhZDJhY2FhYWU5Yi4uNDg2NWYyODYwYTRmIDEwMDY0
NAo+IC0tLSBhL2FyY2gveDg2L2luY2x1ZGUvYXNtL3Byb2Nlc3Nvci5oCj4gKysrIGIvYXJjaC94
ODYvaW5jbHVkZS9hc20vcHJvY2Vzc29yLmgKPiBAQCAtODUzLDQgKzg1MywxMiBAQCBlbnVtIG1k
c19taXRpZ2F0aW9ucyB7Cj4gwqDCoMKgwqDCoMKgwqDCoE1EU19NSVRJR0FUSU9OX1ZNV0VSViwK
PiDCoH07Cj4gwqAKPiArI2lmZGVmIENPTkZJR19YODZfU0dYCj4gK2ludCBhcmNoX21lbW9yeV9m
YWlsdXJlKHVuc2lnbmVkIGxvbmcgcGZuLCBpbnQgZmxhZ3MpOwo+ICsjZGVmaW5lIGFyY2hfbWVt
b3J5X2ZhaWx1cmUgYXJjaF9tZW1vcnlfZmFpbHVyZQo+ICsKPiArYm9vbCBhcmNoX2lzX3BsYXRm
b3JtX3BhZ2UodTY0IHBhZGRyKTsKPiArI2RlZmluZSBhcmNoX2lzX3BsYXRmb3JtX3BhZ2UgYXJj
aF9pc19wbGF0Zm9ybV9wYWdlCj4gKyNlbmRpZgo+ICsKPiDCoCNlbmRpZiAvKiBfQVNNX1g4Nl9Q
Uk9DRVNTT1JfSCAqLwo+IGRpZmYgLS1naXQgYS9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9zZXRfbWVt
b3J5LmggYi9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9zZXRfbWVtb3J5LmgKPiBpbmRleCA0M2ZhMDgx
YTFhZGIuLmNlOGRkMjE1ZjViMyAxMDA2NDQKPiAtLS0gYS9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9z
ZXRfbWVtb3J5LmgKPiArKysgYi9hcmNoL3g4Ni9pbmNsdWRlL2FzbS9zZXRfbWVtb3J5LmgKPiBA
QCAtMiw2ICsyLDcgQEAKPiDCoCNpZm5kZWYgX0FTTV9YODZfU0VUX01FTU9SWV9ICj4gwqAjZGVm
aW5lIF9BU01fWDg2X1NFVF9NRU1PUllfSAo+IMKgCj4gKyNpbmNsdWRlIDxsaW51eC9tbS5oPgo+
IMKgI2luY2x1ZGUgPGFzbS9wYWdlLmg+Cj4gwqAjaW5jbHVkZSA8YXNtLWdlbmVyaWMvc2V0X21l
bW9yeS5oPgo+IMKgCj4gQEAgLTk4LDYgKzk5LDkgQEAgc3RhdGljIGlubGluZSBpbnQgc2V0X21j
ZV9ub3NwZWModW5zaWduZWQgbG9uZyBwZm4sIGJvb2wgdW5tYXApCj4gwqDCoMKgwqDCoMKgwqDC
oHVuc2lnbmVkIGxvbmcgZGVjb3lfYWRkcjsKPiDCoMKgwqDCoMKgwqDCoMKgaW50IHJjOwo+IMKg
Cj4gK8KgwqDCoMKgwqDCoMKgLyogU0dYIHBhZ2VzIGFyZSBub3QgaW4gdGhlIDE6MSBtYXAgKi8K
PiArwqDCoMKgwqDCoMKgwqBpZiAoYXJjaF9pc19wbGF0Zm9ybV9wYWdlKHBmbiA8PCBQQUdFX1NI
SUZUKSkKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgcmV0dXJuIDA7Cj4gwqDCoMKg
wqDCoMKgwqDCoC8qCj4gwqDCoMKgwqDCoMKgwqDCoCAqIFdlIHdvdWxkIGxpa2UgdG8ganVzdCBj
YWxsOgo+IMKgwqDCoMKgwqDCoMKgwqAgKsKgwqDCoMKgwqAgc2V0X21lbW9yeV9YWCgodW5zaWdu
ZWQgbG9uZylwZm5fdG9fa2FkZHIocGZuKSwgMSk7Cj4gZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGlu
dXgvbW0uaCBiL2luY2x1ZGUvbGludXgvbW0uaAo+IGluZGV4IDczYTUyYWJhNDQ4Zi4uNjJiMTk5
ZWQ1ZWM2IDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvbGludXgvbW0uaAo+ICsrKyBiL2luY2x1ZGUv
bGludXgvbW0uaAo+IEBAIC0zMjg0LDUgKzMyODQsMTkgQEAgc3RhdGljIGlubGluZSBpbnQgc2Vh
bF9jaGVja19mdXR1cmVfd3JpdGUoaW50IHNlYWxzLCBzdHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QgKnZt
YSkKPiDCoMKgwqDCoMKgwqDCoMKgcmV0dXJuIDA7Cj4gwqB9Cj4gwqAKPiArI2lmbmRlZiBhcmNo
X21lbW9yeV9mYWlsdXJlCj4gK3N0YXRpYyBpbmxpbmUgaW50IGFyY2hfbWVtb3J5X2ZhaWx1cmUo
dW5zaWduZWQgbG9uZyBwZm4sIGludCBmbGFncykKPiArewo+ICvCoMKgwqDCoMKgwqDCoHJldHVy
biAtRU5YSU87Cj4gK30KPiArI2VuZGlmCj4gKwo+ICsjaWZuZGVmIGFyY2hfaXNfcGxhdGZvcm1f
cGFnZQo+ICtzdGF0aWMgaW5saW5lIGJvb2wgYXJjaF9pc19wbGF0Zm9ybV9wYWdlKHU2NCBwYWRk
cikKPiArewo+ICvCoMKgwqDCoMKgwqDCoHJldHVybiBmYWxzZTsKPiArfQo+ICsjZW5kaWYKPiAr
Cj4gwqAjZW5kaWYgLyogX19LRVJORUxfXyAqLwo+IMKgI2VuZGlmIC8qIF9MSU5VWF9NTV9IICov
Cj4gZGlmZiAtLWdpdCBhL21tL21lbW9yeS1mYWlsdXJlLmMgYi9tbS9tZW1vcnktZmFpbHVyZS5j
Cj4gaW5kZXggM2U2NDQ5ZjIxMDJhLi5iMWNiZjk4NDVjMTkgMTAwNjQ0Cj4gLS0tIGEvbW0vbWVt
b3J5LWZhaWx1cmUuYwo+ICsrKyBiL21tL21lbW9yeS1mYWlsdXJlLmMKPiBAQCAtMTYzMiwyMSAr
MTYzMiwyOCBAQCBpbnQgbWVtb3J5X2ZhaWx1cmUodW5zaWduZWQgbG9uZyBwZm4sIGludCBmbGFn
cykKPiDCoMKgwqDCoMKgwqDCoMKgaWYgKCFzeXNjdGxfbWVtb3J5X2ZhaWx1cmVfcmVjb3Zlcnkp
Cj4gwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBwYW5pYygiTWVtb3J5IGZhaWx1cmUg
b24gcGFnZSAlbHgiLCBwZm4pOwo+IMKgCj4gK8KgwqDCoMKgwqDCoMKgbXV0ZXhfbG9jaygmbWZf
bXV0ZXgpOwo+ICsKPiDCoMKgwqDCoMKgwqDCoMKgcCA9IHBmbl90b19vbmxpbmVfcGFnZShwZm4p
Owo+IMKgwqDCoMKgwqDCoMKgwqBpZiAoIXApIHsKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgcmVzID0gYXJjaF9tZW1vcnlfZmFpbHVyZShwZm4sIGZsYWdzKTsKPiArwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgaWYgKHJlcyA9PSAwKQo+ICvCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgZ290byB1bmxvY2tfbXV0ZXg7Cj4gKwo+IMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgaWYgKHBmbl92YWxpZChwZm4pKSB7Cj4gwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgcGdtYXAgPSBnZXRfZGV2
X3BhZ2VtYXAocGZuLCBOVUxMKTsKPiAtwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoGlmIChwZ21hcCkKPiAtwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqByZXR1cm4gbWVtb3J5X2ZhaWx1cmVfZGV2
X3BhZ2VtYXAocGZuLCBmbGFncywKPiAtwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgcGdtYXApOwo+ICvCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgaWYgKHBnbWFwKSB7Cj4gK8Kg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgcmVzID0gbWVtb3J5X2ZhaWx1cmVfZGV2X3BhZ2VtYXAocGZuLCBmbGFncywKPiArwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgIHBnbWFwKTsKPiArwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqBnb3RvIHVubG9ja19tdXRleDsKPiArwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoH0KPiDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoH0KPiDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoHByX2Vycigi
TWVtb3J5IGZhaWx1cmU6ICUjbHg6IG1lbW9yeSBvdXRzaWRlIGtlcm5lbCBjb250cm9sXG4iLAo+
IMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoHBmbik7Cj4g
LcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoHJldHVybiAtRU5YSU87Cj4gK8KgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoMKgwqDCoHJlcyA9IC1FTlhJTzsKPiArwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgZ290byB1bmxvY2tfbXV0ZXg7Cj4gwqDCoMKgwqDCoMKgwqDCoH0KPiDCoAo+
IC3CoMKgwqDCoMKgwqDCoG11dGV4X2xvY2soJm1mX211dGV4KTsKPiAtCj4gwqB0cnlfYWdhaW46
Cj4gwqDCoMKgwqDCoMKgwqDCoGlmIChQYWdlSHVnZShwKSkgewo+IMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgcmVzID0gbWVtb3J5X2ZhaWx1cmVfaHVnZXRsYihwZm4sIGZsYWdzKTsK
ClJldmlld2VkLWJ5OiBKYXJra28gU2Fra2luZW4gPGphcmtrb0BrZXJuZWwub3JnPgoKL0phcmtr
bwoK

